javascript:!function(){function e(e){"undefined"!=typeof WF&&WF.showMessage?(WF.showMessage(e),setTimeout(WF.hideMessage,2e3)):alert(e)}function t(e){let t=e.replace(/^#/,"");if(/^[pP]\d+$/.test(t))return["P",t.replace(/^[pP]/,"")];if(/^[^-\s]+-[^-\s]+$/.test(t)){let l=t.split("-");return[l[0],l.slice(1).join("-")]}return null}function l(e){return e.replace(/#[^\s]+/g,"").trim()}function n(e){let t=document.createElement("td");return t.style.border="1px solid #ccc",t.style.padding="6px","string"==typeof e&&(e=document.createTextNode(e)),t.appendChild(e),t}function r(e){let t=0,l=0;window.scrollTo(0,document.body.scrollHeight);let n=setInterval(()=>{window.scrollTo(0,document.body.scrollHeight);let r=document.body.scrollHeight;r===t?l++:(l=0,t=r),l>=3&&(clearInterval(n),e())},800)}function o(){let i=document.querySelector("div[projectid].project.root.selected");if(!i){e("No root bullet found!");return}let a=l(i.querySelector(".innerContentContainer").textContent.trim()),c=document.querySelectorAll(".innerContentContainer"),s=[],d=new Set;if(!c.length){e("No bullets found!");return}if(c.forEach(e=>{let clone=e.cloneNode(!0);clone.querySelectorAll("time.monolith-pill, span.contentTag[data-val^='@'], a.contentLink").forEach(e=>e.remove());let text=clone.textContent.trim(),r=text.match(/#[^\s]+/g)||[];r.forEach(e=>{text=text.replace(e,"").trim()});let o=text||"(no text)",p=e.textContent.trim(),u=p.match(/#[^\s]+/g)||[],h=u.filter(e=>t(e));if(!h.length)return;let f={},m=[];u.forEach(e=>{let l=t(e);l?(f[l[0]]=l[1],d.add(l[0])):m.push(e)});let y=e.closest(".project"),C=y?y.querySelector(".name"):null,b=C?C.querySelector("a.bullet"):null;if(!b)return;let E=b.getAttribute("href")||"",x=null;y&&y.parentElement&&(x=y.parentElement.closest(".project"));let g="",k="";if(x){let q=x.querySelector(".name .innerContentContainer");q&&(g=l(q.textContent.trim()));let L=x.querySelector(".name a.bullet");L&&(k=L.getAttribute("href")||"")}let $=e.querySelector("time.monolith-pill"),_="";$&&(_=$.textContent.trim());let w=e.querySelectorAll('span.contentTag[data-val^="@"]'),S=Array.from(w).map(e=>e.textContent.trim()),T=S.join(", "),N=e.querySelectorAll("a.contentLink"),I=Array.from(N).map(e=>{let t=e.textContent.trim(),l=e.getAttribute("href")||"";return t+"|"+l}),O=I.join(", ");s.push({parentName:g||"(no parent)",parentHref:k,bulletText:o,bulletHref:E,tags:m,properties:f,date:_,mentions:T,backlinks:O})}),!s.length){e("No bullets with special tags found!");return}let p=document.createElement("div");p.className="customTableContainer",p.style.margin="10px",p.style.display="flex",p.style.flexDirection="column";let u=document.createElement("div");u.style.display="flex",u.style.alignItems="center",u.style.gap="10px";let h=document.createElement("button");h.innerHTML='<i data-lucide="chevrons-down-up" size="16" stroke-width="1"></i>',h.style.cursor="pointer",h.onclick=function(){let e=p.querySelector("table");e&&(e.style.display="none"===e.style.display?"":"none")};let f=document.createElement("button");f.innerHTML='<i data-lucide="refresh-cw" size="16" stroke-width="1"></i>',f.style.cursor="pointer",f.onclick=function(){p.remove(),r(o)};let m=document.createElement("button");m.innerHTML='<i data-lucide="plus" size="16" stroke-width="1"></i>',m.style.cursor="pointer",m.onclick=function(){r(o),document.querySelectorAll(".customTableContainer").forEach(e=>{e.style.display="flex"})};let y=document.createElement("span");y.textContent,a,y.style.fontWeight="bold",y.style.marginLeft="10px";let C=document.createElement("input");C.placeholder="Filter ALL columns...",C.style.flex="1",C.style.padding="4px";let b=document.createElement("button");b.innerHTML='<i data-lucide="x" size="16" stroke-width="1"></i>',b.style.cursor="pointer",b.onclick=function(){p.remove()},u.appendChild(h),u.appendChild(f),u.appendChild(y),u.appendChild(C),u.appendChild(b),u.appendChild(m),p.appendChild(u);let E=document.createElement("table");E.style.width="100%",E.style.borderCollapse="collapse",E.style.fontFamily="Arial,sans-serif",E.style.fontSize="14px",E.style.margin="20px 0";let x=document.createElement("thead"),g=document.createElement("tr"),$=document.createElement("tr"),_=["Parent","Bullet","Tags","Date","@s","Backlinks"],w=Array.from(d);_=_.concat(w);let S=[];_.forEach(e=>{let t=function(e){let t=document.createElement("th");return t.textContent=e,t.style.border="1px solid #ccc",t.style.padding="6px",t.style.cursor="pointer",t}(e),l=function(){let e=document.createElement("td");e.style.border="1px solid #ccc",e.style.padding="3px";let t=document.createElement("input");return t.style.width="95%",t.placeholder="Filter...",t.style.padding="2px",e.appendChild(t),{td:e,inp:t}}();g.appendChild(t),$.appendChild(l.td),S.push(l.inp)}),x.appendChild(g),x.appendChild($),E.appendChild(x);let k=document.createElement("tbody");s.forEach(e=>{let t=document.createElement("tr"),l=document.createElement("a");l.href=e.parentHref,l.textContent=e.parentName,l.style.color="blue",l.style.textDecoration="underline",t.appendChild(n(l));let r=document.createElement("a");r.href=e.bulletHref,r.textContent=e.bulletText,r.style.color="blue",r.style.textDecoration="underline",t.appendChild(n(r)),t.appendChild(n(e.tags.join(" "))),t.appendChild(n(e.date)),t.appendChild(n(e.mentions)),t.appendChild(n(e.backlinks)),w.forEach(l=>{t.appendChild(n(e.properties[l]||""))}),k.appendChild(t)}),E.appendChild(k);const headers=g.querySelectorAll("th"),filterCells=$.querySelectorAll("td"),rows=k.querySelectorAll("tr");for(let e=0;e<_.length;e++){let t=!1;rows.forEach(l=>{let n=l.cells[e];n&&n.textContent.trim()&&(t=!0)}),t||(headers[e]&&(headers[e].style.display="none"),filterCells[e]&&(filterCells[e].style.display="none"),rows.forEach(l=>{let t=l.cells[e];t&&(t.style.display="none")}))}p.appendChild(E),i.parentNode.insertBefore(p,i);let q=g.querySelectorAll("th");function L(){let e=k.querySelectorAll("tr"),t=C.value.trim().toLowerCase();e.forEach(e=>{let l=e.querySelectorAll("td"),n=!0;if(t){let r=[],o=[];if(t.split(",").forEach(e=>{(e=e.trim()).startsWith("!")?o.push(e.slice(1).toLowerCase()):r.push(e.toLowerCase())}),r.length>0){let i=!1;r.forEach(e=>{Array.from(l).some(t=>t.textContent.toLowerCase().includes(e))&&(i=!0)}),i||(n=!1)}if(o.length>0){let a=!1;o.forEach(e=>{Array.from(l).some(t=>t.textContent.toLowerCase().includes(e))&&(a=!0)}),a&&(n=!1)}}for(let c=0;c<S.length;c++){let s=S[c].value.trim().toLowerCase();if(s){let d=[],p=[];s.split(",").forEach(e=>{(e=e.trim()).startsWith("!")?p.push(e.slice(1).toLowerCase()):d.push(e.toLowerCase())});let u=l[c].textContent.toLowerCase();if(d.length>0){let h=!1;if(d.forEach(e=>{u.includes(e)&&(h=!0)}),!h){n=!1;break}}if(p.length>0){let f=!1;if(p.forEach(e=>{u.includes(e)&&(f=!0)}),f){n=!1;break}}}}e.style.display=n?"":"none"})}if(q.forEach((e,t)=>{let l=!0;e.onclick=()=>{(function(e,t,l){let n=e.querySelector("tbody"),r=Array.from(n.querySelectorAll("tr"));r.sort((e,n)=>{let r=e.children[t].textContent.trim().toLowerCase(),o=n.children[t].textContent.trim().toLowerCase(),i=parseFloat(r),a=parseFloat(o);return isNaN(i)||isNaN(a)?l?r.localeCompare(o):o.localeCompare(r):l?i-a:a-i}),r.forEach(e=>n.appendChild(e))})(E,t,l),l=!l}}),S.forEach(e=>{e.oninput=L}),C.oninput=L,window.lucide)lucide.createIcons();else{let T=document.createElement("script");T.src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js",T.onload=function(){window.lucide&&window.lucide.createIcons()},document.head.appendChild(T)}e("Done! Table built at top."),window.scrollTo(0,0)}!function t(){let l=document.querySelector(".headerTableButton");l&&l.remove();let n=document.querySelector('.headerShareButton._3hmsj.iconButton.lg.shape-circle[data-handbook="sharing.share"]');if(!n){e("Share button not found - cannot insert table icon.");return}let i=document.createElement("div");i.className="headerTableButton _3hmsj iconButton lg shape-circle",i.style.cursor="pointer",i.innerHTML='<i data-lucide="table-properties" size="16" stroke-width="1"></i>',i.onclick=function(){let t=document.querySelectorAll(".customTableContainer");t.length>0?(t.forEach(e=>{e.style.display="none"===e.style.display?"flex":"none"}),e("none"!==t[0].style.display?"All tables shown":"All tables hidden")):r(o)},n.parentNode.insertBefore(i,n),window.lucide?lucide.createIcons():(a=document.createElement("script"),a.src="https://cdn.jsdelivr.net/npm/lucide@latest/dist/umd/lucide.js",a.onload=function(){window.lucide&&window.lucide.createIcons()},document.head.appendChild(a))}()}();
